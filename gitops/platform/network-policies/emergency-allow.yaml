apiVersion: cilium.io/v2
kind: CiliumNetworkPolicy
metadata:
  name: emergency-allow-argocd
  namespace: argocd
  labels:
    component: emergency-breakglass
spec:
  endpointSelector:
    matchLabels:
      app.kubernetes.io/part-of: argocd
  egress:
    # TEMPORARY EMERGENCY OVERRIDE: Allow all egress from argocd components
    # Delete this policy as soon as granular network egress rules are fixed!
    - toEntities:
        - world
        - cluster
      toPorts:
        - ports:
            - port: '443'
              protocol: TCP
            - port: '80'
              protocol: TCP
            - port: '6443'
              protocol: TCP
            - port: '53'
              protocol: UDP
